# T3 Stack Monorepo é¡¹ç›®æ€»ç»“

> åˆ›å»ºæ—¶é—´: 2026-01-28  
> æ›´æ–°æ—¶é—´: 2026-01-29  
> æ¶æ„: Monorepo (pnpm + Turborepo)  
> æ¸²æŸ“æ¨¡å¼: çº¯ CSR (Client-Side Rendering)

---

## ğŸ“‹ ç›®å½•

1. [é¡¹ç›®æ¦‚è§ˆ](#é¡¹ç›®æ¦‚è§ˆ)
2. [Monorepo æ¶æ„](#monorepo-æ¶æ„)
3. [æŠ€æœ¯æ ˆè¯¦æƒ…](#æŠ€æœ¯æ ˆè¯¦æƒ…)
4. [åº”ç”¨è¯´æ˜](#åº”ç”¨è¯´æ˜)
5. [å…±äº«åŒ…è¯´æ˜](#å…±äº«åŒ…è¯´æ˜)
6. [ç›®å½•ç»“æ„](#ç›®å½•ç»“æ„)
7. [API æ¥å£](#api-æ¥å£)
8. [æ•°æ®æ¨¡å‹](#æ•°æ®æ¨¡å‹)
9. [å¿«é€Ÿå¯åŠ¨](#å¿«é€Ÿå¯åŠ¨)
10. [å¼€å‘å‘½ä»¤](#å¼€å‘å‘½ä»¤)

---

## é¡¹ç›®æ¦‚è§ˆ

è¿™æ˜¯ä¸€ä¸ªåŸºäº **T3 Stack** æ„å»ºçš„ **Monorepo** å¤§å‹é¡¹ç›®æ¶æ„ Demoï¼ŒåŒ…å«ï¼š

- ğŸŒ **Web å‰ç«¯** - Next.js å…¨æ ˆåº”ç”¨
- ğŸ”§ **ç®¡ç†ç«¯æœåŠ¡** - ç”¨æˆ·ç®¡ç†ã€è®¤è¯ API
- âš™ï¸ **è¿è¡Œç«¯æœåŠ¡** - ä¸šåŠ¡è¿è¡Œã€ä»»åŠ¡è°ƒåº¦ API

### ä¸»è¦ç‰¹æ€§

- âœ… Monorepo æ¶æ„ (pnpm + Turborepo)
- âœ… å‰åç«¯åˆ†ç¦»ï¼Œå¯ç‹¬ç«‹éƒ¨ç½²
- âœ… å…±äº«ç±»å‹å®šä¹‰å’Œæ•°æ®åº“è®¿é—®
- âœ… RESTful API è®¾è®¡
- âœ… ç”¨æˆ·è®¤è¯å’Œ CRUD åŠŸèƒ½
- âœ… GitHub é£æ ¼æ·±è‰²ä¸»é¢˜ UI

---

## Monorepo æ¶æ„

### æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Web å‰ç«¯                                 â”‚
â”‚                      (apps/web - Next.js)                       â”‚
â”‚                http://localhost:3000                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                       â”‚
                    â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       ç®¡ç†ç«¯æœåŠ¡              â”‚   â”‚       è¿è¡Œç«¯æœåŠ¡              â”‚
â”‚   (apps/admin-service)       â”‚   â”‚   (apps/runtime-service)     â”‚
â”‚   http://localhost:4001      â”‚   â”‚   http://localhost:4002      â”‚
â”‚                              â”‚   â”‚                              â”‚
â”‚   èŒè´£:                       â”‚   â”‚   èŒè´£:                       â”‚
â”‚   - ç”¨æˆ·ç®¡ç† CRUD            â”‚   â”‚   - æ–‡ç« ç®¡ç†                  â”‚
â”‚   - è®¤è¯æˆæƒ                  â”‚   â”‚   - ä»»åŠ¡è°ƒåº¦                  â”‚
â”‚   - ç³»ç»Ÿé…ç½®                  â”‚   â”‚   - ä¸šåŠ¡è¿è¡Œ                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   å…±äº«æ•°æ®åº“ (Prisma) â”‚
                    â”‚   packages/database   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµ

```
ç”¨æˆ·æ“ä½œ â†’ Web å‰ç«¯ â†’ HTTP è¯·æ±‚ â†’ åç«¯æœåŠ¡ â†’ Prisma â†’ SQLite
                 â†‘                                    â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æŠ€æœ¯æ ˆè¯¦æƒ…

### æ ¸å¿ƒæŠ€æœ¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **pnpm** | 9.x | åŒ…ç®¡ç†å™¨ |
| **Turborepo** | 2.x | Monorepo æ„å»ºå·¥å…· |
| **Next.js** | 15.x | React å…¨æ ˆæ¡†æ¶ |
| **Express** | 4.x | åç«¯æœåŠ¡æ¡†æ¶ |
| **TypeScript** | 5.x | ç±»å‹å®‰å…¨ |
| **Prisma** | 6.x | æ•°æ®åº“ ORM |
| **SQLite** | - | å¼€å‘æ•°æ®åº“ |

### å‰ç«¯æŠ€æœ¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **React** | 19.x | UI ç»„ä»¶åº“ |
| **Tailwind CSS** | 4.x | CSS æ¡†æ¶ |
| **tRPC** | 11.x | ç«¯åˆ°ç«¯ç±»å‹å®‰å…¨ API |
| **NextAuth.js** | 5.0-beta | èº«ä»½è®¤è¯ |
| **TanStack Query** | 5.x | æ•°æ®è¯·æ±‚ç®¡ç† |

### åç«¯æŠ€æœ¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Express** | 4.x | HTTP æœåŠ¡å™¨ |
| **bcryptjs** | 3.x | å¯†ç åŠ å¯† |
| **Zod** | 3.x | æ•°æ®éªŒè¯ |
| **CORS** | 2.x | è·¨åŸŸæ”¯æŒ |

---

## åº”ç”¨è¯´æ˜

### apps/web - Web å‰ç«¯

| å±æ€§ | å€¼ |
|------|-----|
| **æ¡†æ¶** | Next.js 15 (App Router) |
| **ç«¯å£** | 3000 |
| **æ¸²æŸ“æ¨¡å¼** | CSR |
| **è®¤è¯** | NextAuth.js |

**é¡µé¢è·¯ç”±**ï¼š

| è·¯ç”± | è¯´æ˜ |
|------|------|
| `/` | é¦–é¡µ |
| `/auth/signin` | ç™»å½•é¡µ |
| `/auth/register` | æ³¨å†Œé¡µ |
| `/admin/users` | ç”¨æˆ·ç®¡ç† |

---

### apps/admin-service - ç®¡ç†ç«¯æœåŠ¡

| å±æ€§ | å€¼ |
|------|-----|
| **æ¡†æ¶** | Express |
| **ç«¯å£** | 4001 |
| **èŒè´£** | ç”¨æˆ·ç®¡ç†ã€è®¤è¯ |

**API ç«¯ç‚¹**ï¼š

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/api/users` | è·å–ç”¨æˆ·åˆ—è¡¨ |
| GET | `/api/users/stats` | è·å–ç”¨æˆ·ç»Ÿè®¡ |
| GET | `/api/users/:id` | è·å–å•ä¸ªç”¨æˆ· |
| POST | `/api/users` | åˆ›å»ºç”¨æˆ· |
| PUT | `/api/users/:id` | æ›´æ–°ç”¨æˆ· |
| DELETE | `/api/users/:id` | åˆ é™¤ç”¨æˆ· |
| POST | `/api/auth/register` | ç”¨æˆ·æ³¨å†Œ |
| POST | `/api/auth/login` | ç”¨æˆ·ç™»å½• |

---

### apps/runtime-service - è¿è¡Œç«¯æœåŠ¡

| å±æ€§ | å€¼ |
|------|-----|
| **æ¡†æ¶** | Express |
| **ç«¯å£** | 4002 |
| **èŒè´£** | ä¸šåŠ¡è¿è¡Œã€ä»»åŠ¡è°ƒåº¦ |

**API ç«¯ç‚¹**ï¼š

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/api/posts` | è·å–æ–‡ç« åˆ—è¡¨ |
| GET | `/api/posts/:id` | è·å–å•ä¸ªæ–‡ç«  |
| POST | `/api/posts` | åˆ›å»ºæ–‡ç«  |
| DELETE | `/api/posts/:id` | åˆ é™¤æ–‡ç«  |
| GET | `/api/tasks` | è·å–ä»»åŠ¡åˆ—è¡¨ |
| POST | `/api/tasks` | åˆ›å»ºä»»åŠ¡ |
| POST | `/api/tasks/:id/run` | æ‰§è¡Œä»»åŠ¡ |
| DELETE | `/api/tasks/:id` | åˆ é™¤ä»»åŠ¡ |

---

## å…±äº«åŒ…è¯´æ˜

### packages/database - æ•°æ®åº“å…±äº«åŒ…

æä¾› Prisma Schema å’Œå®¢æˆ·ç«¯ï¼Œæ‰€æœ‰åº”ç”¨å…±äº«åŒä¸€æ•°æ®åº“è®¿é—®ã€‚

```typescript
// ä½¿ç”¨ç¤ºä¾‹
import { db } from "@repo/database";

const users = await db.user.findMany();
```

---

### packages/types - ç±»å‹å…±äº«åŒ…

æä¾›ç»Ÿä¸€çš„ç±»å‹å®šä¹‰ï¼Œç¡®ä¿å‰åç«¯ç±»å‹ä¸€è‡´ã€‚

```typescript
// ä½¿ç”¨ç¤ºä¾‹
import type { User, CreateUserInput } from "@repo/types";
```

**åŒ…å«ç±»å‹**ï¼š
- `User` - ç”¨æˆ·ç±»å‹
- `CreateUserInput` - åˆ›å»ºç”¨æˆ·å‚æ•°
- `UpdateUserInput` - æ›´æ–°ç”¨æˆ·å‚æ•°
- `UserStats` - ç”¨æˆ·ç»Ÿè®¡
- `LoginInput` - ç™»å½•å‚æ•°
- `RegisterInput` - æ³¨å†Œå‚æ•°
- `ApiResponse<T>` - é€šç”¨ API å“åº”

---

### packages/config - é…ç½®å…±äº«åŒ…

æä¾›å…±äº«çš„ TypeScript å’Œ ESLint é…ç½®ã€‚

---

## ç›®å½•ç»“æ„

```
t3_stack_demo/
â”œâ”€â”€ apps/                           # åº”ç”¨å±‚
â”‚   â”œâ”€â”€ web/                        # ğŸŒ Web å‰ç«¯ (Next.js)
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ app/                # é¡µé¢è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ server/             # æœåŠ¡ç«¯ä»£ç 
â”‚   â”‚   â”‚   â”œâ”€â”€ trpc/               # tRPC å®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â””â”€â”€ styles/             # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â””â”€â”€ .env
â”‚   â”‚
â”‚   â”œâ”€â”€ admin-service/              # ğŸ”§ ç®¡ç†ç«¯æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts            # å…¥å£æ–‡ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ routers/            # API è·¯ç”±
â”‚   â”‚   â”‚       â”œâ”€â”€ user.router.ts
â”‚   â”‚   â”‚       â””â”€â”€ auth.router.ts
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â””â”€â”€ .env
â”‚   â”‚
â”‚   â””â”€â”€ runtime-service/            # âš™ï¸ è¿è¡Œç«¯æœåŠ¡
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ index.ts            # å…¥å£æ–‡ä»¶
â”‚       â”‚   â””â”€â”€ routers/            # API è·¯ç”±
â”‚       â”‚       â”œâ”€â”€ post.router.ts
â”‚       â”‚       â””â”€â”€ task.router.ts
â”‚       â”œâ”€â”€ package.json
â”‚       â””â”€â”€ .env
â”‚
â”œâ”€â”€ packages/                       # å…±äº«åŒ…
â”‚   â”œâ”€â”€ database/                   # ğŸ“¦ Prisma Schema + Client
â”‚   â”‚   â”œâ”€â”€ prisma/
â”‚   â”‚   â”‚   â””â”€â”€ schema.prisma
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                      # ğŸ“¦ å…±äº«ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â””â”€â”€ config/                     # ğŸ“¦ å…±äº«é…ç½®
â”‚       â”œâ”€â”€ tsconfig.base.json
â”‚       â””â”€â”€ package.json
â”‚
â”œâ”€â”€ pnpm-workspace.yaml             # pnpm å·¥ä½œç©ºé—´
â”œâ”€â”€ turbo.json                      # Turborepo é…ç½®
â”œâ”€â”€ package.json                    # æ ¹é…ç½®
â””â”€â”€ README.md
```

---

## æ•°æ®æ¨¡å‹

### User æ¨¡å‹

```prisma
model User {
    id            String    @id @default(cuid())
    name          String?
    email         String?   @unique
    password      String?              // åŠ å¯†åçš„å¯†ç 
    role          String    @default("user")    // admin | user
    status        String    @default("active")  // active | inactive | suspended
    createdAt     DateTime  @default(now())
    updatedAt     DateTime  @updatedAt
    accounts      Account[]
    sessions      Session[]
    posts         Post[]
}
```

### Post æ¨¡å‹

```prisma
model Post {
    id          Int      @id @default(autoincrement())
    name        String
    createdAt   DateTime @default(now())
    updatedAt   DateTime @updatedAt
    createdBy   User     @relation(fields: [createdById], references: [id])
    createdById String
}
```

---

## å¿«é€Ÿå¯åŠ¨

```bash
# 1. å®‰è£… pnpmï¼ˆå¦‚æœªå®‰è£…ï¼‰
npm install -g pnpm

# 2. å®‰è£…æ‰€æœ‰ä¾èµ–
pnpm install

# 3. ç”Ÿæˆ Prisma Client
cd packages/database
pnpm db:generate
cd ../..

# 4. åˆå§‹åŒ–æ•°æ®åº“
cd packages/database
pnpm db:push
cd ../..

# 5. å¯åŠ¨æ‰€æœ‰æœåŠ¡
pnpm dev
```

æœåŠ¡åœ°å€ï¼š
- Web å‰ç«¯: http://localhost:3000
- ç®¡ç†ç«¯æœåŠ¡: http://localhost:4001
- è¿è¡Œç«¯æœåŠ¡: http://localhost:4002

---

## å¼€å‘å‘½ä»¤

### æ ¹ç›®å½•å‘½ä»¤

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `pnpm dev` | å¯åŠ¨æ‰€æœ‰æœåŠ¡ |
| `pnpm dev:web` | åªå¯åŠ¨ Web å‰ç«¯ |
| `pnpm dev:admin` | åªå¯åŠ¨ç®¡ç†ç«¯æœåŠ¡ |
| `pnpm dev:runtime` | åªå¯åŠ¨è¿è¡Œç«¯æœåŠ¡ |
| `pnpm build` | æ„å»ºæ‰€æœ‰åº”ç”¨ |
| `pnpm typecheck` | ç±»å‹æ£€æŸ¥ |
| `pnpm lint` | ä»£ç æ£€æŸ¥ |

### æ•°æ®åº“å‘½ä»¤

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `pnpm db:generate` | ç”Ÿæˆ Prisma Client |
| `pnpm db:push` | æ¨é€ Schema åˆ°æ•°æ®åº“ |

---

## æµ‹è¯•è´¦æˆ·

| è´¦æˆ·ç±»å‹ | é‚®ç®± | å¯†ç  |
|----------|------|------|
| ç®¡ç†å‘˜ | admin@example.com | admin123 |
| æ™®é€šç”¨æˆ· | user@example.com | user123 |

---

*æ›´æ–°äº 2026-01-29*
